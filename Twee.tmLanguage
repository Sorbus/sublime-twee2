<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>fileTypes</key>
	<array>
		<string>tw2</string>
	</array>
	<key>name</key>
	<string>Twee2</string>
	<key>patterns</key>
	<array>
		<dict>
			<key>begin</key>
			<string>(&lt;html&gt;)</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.html.begin.twee</string>
				</dict>
			</dict>
			<key>contentName</key>
			<string>text.html.twee</string>
			<key>end</key>
			<string>(&lt;/html&gt;)</string>
			<key>endCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.html.end.twee</string>
				</dict>
			</dict>
			<key>name</key>
			<string>meta.html.twee</string>
			<key>patterns</key>
			<array>
				<dict>
					<key>include</key>
					<string>text.html.basic</string>
				</dict>
			</array>
		</dict>
		<dict>
			<key>begin</key>
			<string>(^::)(.+)(\[)(stylesheet)(\])</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>storage.type.twee</string>
				</dict>
				<key>2</key>
				<dict>
					<key>name</key>
					<string>comment.block.entity.name.type.css.twee</string>
				</dict>
				<key>3</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.tag.begin.twee</string>
				</dict>
				<key>4</key>
				<dict>
					<key>name</key>
					<string>storage.modifer.twee</string>
				</dict>
				<key>5</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.tag.end.twee</string>
				</dict>
			</dict>
			<key>contentName</key>
			<string>source.embeded.css.twee</string>
			<key>end</key>
			<string>^(?=::)</string>
			<key>name</key>
			<string>meta.css.twee</string>
			<key>patterns</key>
			<array>
				<dict>
					<key>include</key>
					<string>source.css</string>
				</dict>
			</array>
		</dict>
		<dict>
			<key>begin</key>
			<string>(^::)(.+)(\[)(script)(\])</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>storage.type.twee</string>
				</dict>
				<key>2</key>
				<dict>
					<key>name</key>
					<string>comment.block.entity.name.type.js.twee</string>
				</dict>
				<key>3</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.tag.begin.twee</string>
				</dict>
				<key>4</key>
				<dict>
					<key>name</key>
					<string>storage.modifer.twee</string>
				</dict>
				<key>5</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.tag.end.twee</string>
				</dict>
			</dict>
			<key>contentName</key>
			<string>source.embeded.js.twee</string>
			<key>end</key>
			<string>^(?=::)</string>
			<key>name</key>
			<string>meta.js.twee</string>
			<key>patterns</key>
			<array>
				<dict>
					<key>include</key>
					<string>source.js</string>
				</dict>
			</array>
		</dict>
		<dict>
			<key>captures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>storage.type.twee</string>
				</dict>
				<key>3</key>
				<dict>
					<key>name</key>
					<string>support.class.passage.twee</string>
				</dict>
				<key>4</key>
				<dict>
					<key>name</key>
					<string>entity.name.function.passage.twee</string>
				</dict>
				<key>6</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.tag.begin.twee</string>
				</dict>
				<key>7</key>
				<dict>
					<key>name</key>
					<string>entity.name.tag.twee</string>
				</dict>
				<key>8</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.tag.end.twee</string>
				</dict>
			</dict>
			<key>match</key>
			<string>(^::)\s*((Start|StoryTitle|StorySubtitle|StoryAuthor|StoryMenu)|([^\[]*))\s*((\[)([^\]]*)(\]))*</string>
			<key>name</key>
			<string>meta.passage.twee</string>
		</dict>
		<dict>
			<key>begin</key>
			<string>\(</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.function.begin.twee</string>
				</dict>
			</dict>
			<key>end</key>
			<string>\)</string>
			<key>endCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.function.end.twee</string>
				</dict>
			</dict>
			<key>name</key>
			<string>meta.function.twee</string>
			<key>patterns</key>
			<array>
				<dict>
					<key>match</key>
					<string>\b(savegames|load|save|display|print|set|if|elseif|else|font|click|replace|append|set|put|move|link|link-goto|live|stop|text|history|either|random|array|a|count|floor|ceil|round|min|max|abs|sign|sin|cos|tan|hook|mouseover|mouseout|substring|subarray|dataset|datamap|text-style|text-color|text-colour|backround|transition|t8n|click-replace|click-append|click-prepend|click-remove|mouseover-replace|mouseover-append|mouseover-prepend|mouseover-remove|mouseout-replace|mouseout-append|mouseout-prepend|mouseout-remove)\b:</string>
					<key>name</key>
					<string>keyword.control.twee</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\b(it|time)\b|\$\b([A-Za-z_][A-Za-z0-9_]*)\b|\?[A-Za-z0-9_]*\b</string>
					<key>name</key>
					<string>variable.parameter.twee</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\b(eq|neq|gt|gte|lt|lte|and|or|not|is|is not|to|into|contains|is in)\b</string>
					<key>name</key>
					<string>keyword.operator.twee</string>
				</dict>
				<dict>
					<key>match</key>
					<string>('[^']*')</string>
					<key>name</key>
					<string>string.quoted.single.twee</string>
				</dict>
				<dict>
					<key>match</key>
					<string>("[^"]*")</string>
					<key>name</key>
					<string>string.quoted.double.twee</string>
				</dict>
				<dict>
					<key>match</key>
					<string>(/[^/]*/)</string>
					<key>name</key>
					<string>string.regexp.twee</string>
				</dict>
				<dict>
					<key>match</key>
					<string>!|%|&amp;|\*|\-\-|\-|\+\+|\+|~|===|==|=|!=|!==|&lt;=|&gt;=|&lt;&lt;=|&gt;&gt;=|&gt;&gt;&gt;=|&lt;&gt;|&lt;|&gt;|!|&amp;&amp;|\|\||\?\:|\*=|(?&lt;!\()/=|%=|\+=|\-=|&amp;=|\^=|\b(in|instanceof|new|delete|typeof|void)\b</string>
					<key>name</key>
					<string>keyword.operator.js</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\b((0(x|X)[0-9a-fA-F]+)|([0-9]+(\.[0-9]+)?))\b</string>
					<key>name</key>
					<string>constant.numeric.js</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\btrue\b</string>
					<key>name</key>
					<string>constant.language.boolean.true.js</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\bfalse\b</string>
					<key>name</key>
					<string>constant.language.boolean.false.js</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\bnull\b</string>
					<key>name</key>
					<string>constant.language.null.js</string>
				</dict>
				<dict>
					<key>match</key>
					<string>\b(Infinity|NaN|undefined)\b</string>
					<key>name</key>
					<string>constant.language.js</string>
				</dict>
				<dict>
					<key>include</key>
					<string>meta.function.twee</string>
				</dict>
			</array>
		</dict>
		<dict>
			<key>begin</key>
			<string>(\[\[)</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.link.begin.twee</string>
				</dict>
			</dict>
			<key>contentName</key>
			<string>entity.name.function.link.twee</string>
			<key>end</key>
			<string>(\]\])</string>
			<key>endCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.link.end.twee</string>
				</dict>
			</dict>
			<key>name</key>
			<string>meta.markup.underline.link.twee</string>
			<key>patterns</key>
			<array>
				<dict>
					<key>captures</key>
					<dict>
						<key>1</key>
						<dict>
							<key>name</key>
							<string>comment.block.punctuation.definition.link.divider.twee</string>
						</dict>
						<key>2</key>
						<dict>
							<key>name</key>
							<string>entity.other.attribute-name.link.twee</string>
						</dict>
					</dict>
					<key>match</key>
					<string>(\b\|\b)([^\]]*)</string>
				</dict>
			</array>
		</dict>
		<dict>
			<key>begin</key>
			<string>(\[)(img)(\[)</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.image.begin.twee</string>
				</dict>
				<key>2</key>
				<dict>
					<key>name</key>
					<string>support.type.image.twee</string>
				</dict>
				<key>3</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.image.divider.twee</string>
				</dict>
			</dict>
			<key>contentName</key>
			<string>entity.other.attribute-name.image.twee</string>
			<key>end</key>
			<string>(\]\])</string>
			<key>endCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.image.end.twee</string>
				</dict>
			</dict>
			<key>name</key>
			<string>meta.markup.other.image.twee</string>
			<key>patterns</key>
			<array>
				<dict>
					<key>match</key>
					<string>\b\|\b|\b\]\[\b</string>
					<key>name</key>
					<string>comment.block.punctuation.definition.image.divider.twee</string>
				</dict>
			</array>
		</dict>
		<dict>
			<key>match</key>
			<string>&lt;[A-Za-z0-9_]*\|</string>
			<key>name</key>
			<string>variable.parameter.twee</string>
		</dict>
		<dict>
			<key>begin</key>
			<string>(/%)</string>
			<key>beginCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.begin.twee</string>
				</dict>
			</dict>
			<key>contentName</key>
			<string>comment.block.twee</string>
			<key>end</key>
			<string>(%/)</string>
			<key>endCaptures</key>
			<dict>
				<key>1</key>
				<dict>
					<key>name</key>
					<string>comment.block.punctuation.definition.end.twee</string>
				</dict>
			</dict>
			<key>name</key>
			<string>meta.comment.block.twee</string>
		</dict>
	</array>
	<key>scopeName</key>
	<string>text.twee2</string>
	<key>uuid</key>
	<string>03675de4-e93f-4afb-9af0-ea3e6198bfcf</string>
</dict>
</plist>
